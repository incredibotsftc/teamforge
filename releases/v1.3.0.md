# Release v1.3.0: Notebook Sheets (Spreadsheet Support)

## Overview

Version 1.3.0 adds Google Sheets-like spreadsheet functionality to the Notebook feature using Univer Sheets. Teams can now create, edit, and organize spreadsheets alongside their existing notebook pages.

## New Features

### Notebook Sheets
- **Spreadsheet Editor**: Full-featured spreadsheet editor powered by Univer Sheets
- **Folder Organization**: Organize sheets in folders just like notebook pages
- **Drag and Drop**: Move sheets between folders with drag-and-drop support
- **Search Support**: Search for sheets by title
- **Mobile Responsive**: Full support for mobile and tablet devices
- **Data Storage**: Sheet data stored securely in Supabase storage buckets

## Database Changes

- New `notebook_sheets` table for sheet metadata
- New `notebook-sheets` storage bucket for sheet workbook data
- Row Level Security (RLS) policies for team-based isolation
- Indexes for optimal query performance

## User Interface Updates

### Notebook Sidebar
- Sheets now appear alongside pages in the folder tree
- Table icon (ðŸ“Š) distinguishes sheets from notes
- "New Sheet" option in folder dropdown menus
- Rename, delete, and move operations for sheets

### Main Notebook Page
- "New Sheet" button added to desktop toolbar
- "New Sheet" option in mobile dropdown menu
- Sheets accessible via `/notebook/sheet/[sheetId]` route

## Technical Details

- **Frontend**: React 19, Next.js 15, TypeScript
- **Spreadsheet Engine**: Univer Sheets (preset mode)
- **Storage**: Supabase Storage (JSON format)
- **State Management**: TanStack Query for mutations
- **Autosave**: Planned for future release (Univer API pending)

## Migration Instructions

This release requires database migration 0004_add_notebook_sheets.sql to be applied.

**Estimated Migration Time**: ~45 seconds

### Steps:
1. Copy the migration SQL from the Migration Scripts tab
2. Open your Supabase project SQL Editor
3. Paste and run the migration SQL
4. Wait for execution to complete
5. Click "Verify Migrations" to confirm success

## Known Limitations

- **Autosave**: Currently not implemented due to Univer API availability. Manual save will be added in a future update.
- **Collaboration**: Real-time collaboration not yet supported
- **Export**: Sheet export to Excel/CSV planned for future release

## Breaking Changes

None. This is a backwards-compatible addition.

## Upgrade Notes

- After applying the migration, the "New Sheet" button will appear in the Notebook interface
- Existing notebook pages and folders are unaffected
- No data migration required for existing content

## What's Next?

Future enhancements planned:
- Manual save button for sheets
- Sheet templates (budget, project tracking, etc.)
- Export to Excel/CSV
- Import from Excel/CSV
- Real-time collaboration support
- Formula support enhancements
